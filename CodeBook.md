# CodeBook

## Overview
This codebook describes how data is transformed from raw data to create two datasets. The first dataset is used as a means to create the second dataset, which is outputted to the file "tidyMeasurements.csv"

## Input
The original data files are found at below URL. The assumption is that the user downloads and extracts this in the working directory.
* URL: https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip
* Dataset description: http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones

The raw data required is separated in multiple files, therefore the first task is to combine this in a sensible manner. From the Readme.txt, we see these features of the files:
- 'features_info.txt': Shows information about the variables used on the feature vector.
- 'features.txt': List of all features.
- 'activity_labels.txt': Links the class labels with their activity name.
- 'train/X_train.txt': Training set.
- 'train/y_train.txt': Training labels.
- 'test/X_test.txt': Test set.
- 'test/y_test.txt': Test labels.
- 'train/subject_train.txt': Each row identifies the subject who performed the activity for each window sample. Its range is from 1 to 30. 

## Transformation
First, we will read and combine the relevant data into a single table. Second, we will transform the data.

With the zip archive extracted, the script reads data from these files:
* "/UCI HAR Dataset/train/y_train.txt"
* "/UCI HAR Dataset/train/X_train.txt"
* "/UCI HAR Dataset/test/y_test.txt"
* "/UCI HAR Dataset/test/X_test.txt"
* "/UCI HAR Dataset/train/subject_train.txt"
* "/UCI HAR Dataset/test/subject_test.txt"
* "/UCI HAR Dataset/features.txt"
* "/UCI HAR Dataset/activity_labels.txt"

1. Files are combined into one data set
* y_train is added as column to X_train
* y_test is added as column to X_test
* these rows are combined
* subject_train and subject_test are added as columns
* activity_labels are merged with table (based on activity ID) so each activity is given a meaningful name
* Additionally, the features data are assigned to the respective column names for the observations in the table

2. Operations are performed on data
* Columns of subject, activity, and all columns containing the words "mean" and "std" (standard deviation) are extracted to new table. This represents the first dataset.
* A second, independent dataset is created. It is based on the above data set, but it creates two new columns; the row averages of the "mean" and of the "std" variables. The other "mean" and "std" columns are removed. It thus contains only the activity (name), the subject id, and the average of the means and the average of the std (standard deviation) variables. These are grouped by activity and subject id, and sorted by activity.

3. The resulting table is exported to file "tidyMeasurements.csv".

## Details of first dataset
This is the dataset first created. It contains the subject all the measurements of mean and standard deviations.

Dimensions: 88 columns, 10299 rows.

Variables:

* activity : Factor w/ 6 levels (LAYING, SITTING, STANDING, WALKING, WALKING_DOWNSTAIRS, WALKING_UPSTAIRS). This is the name of the activity measured.
* subjectid: int. This represents each of the (1 to 30) subjects which were measured.
* The measurement variables of mean- and std:
* tBodyAcc-mean()-X                   : num  0.308 0.168 0.343 0.31 0.17 ...
* tBodyAcc-mean()-Y                   : num  -0.00617 -0.01862 -0.02722 -0.04363 -0.00886 ...
* tBodyAcc-mean()-Z                   : num  -0.13 -0.0547 -0.0515 -0.1233 -0.1231 ...
* tGravityAcc-mean()-X                : num  0.934 0.936 0.936 0.942 0.938 ...
* tGravityAcc-mean()-Y                : num  -0.235 -0.234 -0.233 -0.226 -0.229 ...
* tGravityAcc-mean()-Z                : num  -0.15 -0.142 -0.128 -0.124 -0.129 ...
* tBodyAccJerk-mean()-X               : num  -0.44 -0.0719 0.2723 -0.1959 0.2738 ...
* tBodyAccJerk-mean()-Y               : num  -0.2229 0.0728 -0.1213 0.0875 0.4261 ...
* tBodyAccJerk-mean()-Z               : num  0.0689 0.224 -0.4609 -0.2304 0.2568 ...
* tBodyGyro-mean()-X                  : num  -0.054 -0.107 -0.0501 0.0427 0.0489 ...
* tBodyGyro-mean()-Y                  : num  -0.0161 -0.0039 -0.0287 -0.1465 -0.2054 ...
* tBodyGyro-mean()-Z                  : num  0.112 0.20399 0.12405 0.0331 -0.00375 ...
* tBodyGyroJerk-mean()-X              : num  -0.3631 -0.0853 0.2418 0.1544 -0.2131 ...
* tBodyGyroJerk-mean()-Y              : num  -0.1482 -0.1102 0.0794 -0.2269 -0.1026 ...
* tBodyGyroJerk-mean()-Z              : num  0.3356 -0.3967 -0.2049 -0.1235 -0.0421 ...
* tBodyAccMag-mean()                  : num  -0.08258 -0.10326 -0.05012 -0.00725 -0.08553 ...
* tGravityAccMag-mean()               : num  -0.08258 -0.10326 -0.05012 -0.00725 -0.08553 ...
* tBodyAccJerkMag-mean()              : num  -0.228 -0.218 -0.203 -0.127 -0.182 ...
* tBodyGyroMag-mean()                 : num  -0.201 -0.175 -0.23 -0.156 -0.155 ...
* tBodyGyroJerkMag-mean()             : num  -0.469 -0.419 -0.43 -0.388 -0.401 ...
* fBodyAcc-mean()-X                   : num  -0.132 -0.236 -0.264 -0.157 -0.171 ...
* fBodyAcc-mean()-Y                   : num  -0.0633 -0.0145 0.0339 0.0947 0.058 ...
* fBodyAcc-mean()-Z                   : num  -0.363 -0.305 -0.224 -0.206 -0.181 ...
* fBodyAcc-meanFreq()-X               : num  -0.144 -0.446 -0.463 -0.397 -0.376 ...
* fBodyAcc-meanFreq()-Y               : num  -0.0715 -0.1488 -0.0896 -0.1564 0.1253 ...
* fBodyAcc-meanFreq()-Z               : num  -0.1286 0.0652 0.1822 0.2347 0.1875 ...
* fBodyAccJerk-mean()-X               : num  -0.305 -0.348 -0.347 -0.251 -0.242 ...
* fBodyAccJerk-mean()-Y               : num  -0.261 -0.208 -0.157 -0.109 -0.197 ...
* fBodyAccJerk-mean()-Z               : num  -0.488 -0.459 -0.395 -0.307 -0.334 ...
* fBodyAccJerk-meanFreq()-X           : num  -0.468 -0.34 -0.459 -0.455 -0.324 ...
* fBodyAccJerk-meanFreq()-Y           : num  -0.638 -0.65 -0.524 -0.602 -0.618 ...
* fBodyAccJerk-meanFreq()-Z           : num  -0.2803 -0.3593 -0.241 -0.0973 -0.2576 ...
* fBodyGyro-mean()-X                  : num  -0.206 -0.227 -0.173 -0.116 -0.198 ...
* fBodyGyro-mean()-Y                  : num  -0.409 -0.364 -0.358 -0.275 -0.325 ...
* fBodyGyro-mean()-Z                  : num  -0.0211 -0.0318 -0.1333 -0.1105 -0.2296 ...
* fBodyGyro-meanFreq()-X              : num  0.0583 -0.1845 0.3079 -0.056 -0.0347 ...
* fBodyGyro-meanFreq()-Y              : num  -0.1345 -0.0696 -0.2047 -0.1332 -0.1454 ...
* fBodyGyro-meanFreq()-Z              : num  0.116 -0.0452 -0.1951 -0.2914 -0.2486 ...
* fBodyAccMag-mean()                  : num  -0.344 -0.319 -0.277 -0.175 -0.164 ...
* fBodyAccMag-meanFreq()              : num  0.0903 0.2381 0.1225 0.1788 0.2325 ...
* fBodyBodyAccJerkMag-mean()          : num  -0.357 -0.389 -0.281 -0.186 -0.222 ...
* fBodyBodyAccJerkMag-meanFreq()      : num  -0.0476 -0.0148 0.2741 0.1451 0.0926 ...
* fBodyBodyGyroMag-mean()             : num  -0.387 -0.326 -0.352 -0.333 -0.36 ...
* fBodyBodyGyroMag-meanFreq()         : num  0.028558 0.05297 0.053314 -0.00063 -0.000333 ...
* fBodyBodyGyroJerkMag-mean()         : num  -0.501 -0.453 -0.466 -0.409 -0.417 ...
* fBodyBodyGyroJerkMag-meanFreq()     : num  -0.0947 -0.223 -0.0311 -0.0421 -0.1361 ...
* angle(tBodyAccMean,gravity)         : num  -0.353 0.648 -0.328 -0.416 0.795 ...
* angle(tBodyAccJerkMean),gravityMean): num  0.685 0.646 -0.496 0.643 -0.194 ...
* angle(tBodyGyroMean,gravityMean)    : num  0.645 0.735 0.614 -0.831 -0.689 ...
* angle(tBodyGyroJerkMean,gravityMean): num  0.512 -0.167 -0.654 -0.736 0.555 ...
* angle(X,gravityMean)                : num  -0.739 -0.744 -0.752 -0.76 -0.755 ...
* angle(Y,gravityMean)                : num  0.245 0.244 0.243 0.239 0.241 ...
* angle(Z,gravityMean)                : num  0.126 0.121 0.111 0.108 0.112 ...
* tBodyAcc-std()-X                    : num  -0.201 -0.248 -0.177 -0.127 -0.216 ...
* tBodyAcc-std()-Y                    : num  -0.0439 0.035 0.0165 0.0864 0.0251 ...
* tBodyAcc-std()-Z                    : num  -0.243 -0.268 -0.22 -0.205 -0.211 ...
* tGravityAcc-std()-X                 : num  -0.972 -0.974 -0.97 -0.975 -0.971 ...
* tGravityAcc-std()-Y                 : num  -0.979 -0.983 -0.974 -0.975 -0.968 ...
* tGravityAcc-std()-Z                 : num  -0.985 -0.939 -0.935 -0.98 -0.962 ...
* tBodyAccJerk-std()-X                : num  -0.278 -0.344 -0.297 -0.208 -0.235 ...
* tBodyAccJerk-std()-Y                : num  -0.1593 -0.0302 -0.0856 -0.03 -0.1004 ...
* tBodyAccJerk-std()-Z                : num  -0.506 -0.519 -0.454 -0.375 -0.415 ...
* tBodyGyro-std()-X                   : num  -0.34 -0.337 -0.41 -0.34 -0.303 ...
* tBodyGyro-std()-Y                   : num  -0.421 -0.361 -0.367 -0.291 -0.319 ...
* tBodyGyro-std()-Z                   : num  -0.0475 -0.0426 -0.1038 -0.0894 -0.1519 ...
* tBodyGyroJerk-std()-X               : num  -0.331 -0.251 -0.28 -0.238 -0.255 ...
* tBodyGyroJerk-std()-Y               : num  -0.548 -0.477 -0.505 -0.443 -0.44 ...
* tBodyGyroJerk-std()-Z               : num  -0.318 -0.297 -0.347 -0.321 -0.336 ...
* tBodyAccMag-std()                   : num  -0.375 -0.358 -0.328 -0.248 -0.284 ...
* tGravityAccMag-std()                : num  -0.375 -0.358 -0.328 -0.248 -0.284 ...
* tBodyAccJerkMag-std()               : num  -0.393 -0.408 -0.358 -0.259 -0.275 ...
* tBodyGyroMag-std()                  : num  -0.304 -0.262 -0.329 -0.265 -0.286 ...
* tBodyGyroJerkMag-std()              : num  -0.475 -0.388 -0.458 -0.392 -0.38 ...
* fBodyAcc-std()-X                    : num  -0.23 -0.253 -0.145 -0.116 -0.235 ...
* fBodyAcc-std()-Y                    : num  -0.09382 -0.00456 -0.05731 0.01305 -0.05794 ...
* fBodyAcc-std()-Z                    : num  -0.239 -0.306 -0.281 -0.269 -0.293 ...
* fBodyAccJerk-std()-X                : num  -0.314 -0.399 -0.306 -0.234 -0.297 ...
* fBodyAccJerk-std()-Y                : num  -0.10524 0.08914 -0.06761 -0.00748 -0.05533 ...
* fBodyAccJerk-std()-Z                : num  -0.522 -0.578 -0.512 -0.442 -0.497 ...
* fBodyGyro-std()-X                   : num  -0.383 -0.374 -0.487 -0.412 -0.339 ...
* fBodyGyro-std()-Y                   : num  -0.432 -0.364 -0.378 -0.306 -0.32 ...
* fBodyGyro-std()-Z                   : num  -0.143 -0.134 -0.176 -0.166 -0.205 ...
* fBodyAccMag-std()                   : num  -0.491 -0.481 -0.462 -0.41 -0.474 ...
* fBodyBodyAccJerkMag-std()           : num  -0.445 -0.436 -0.476 -0.368 -0.353 ...
* fBodyBodyGyroMag-std()              : num  -0.367 -0.344 -0.428 -0.344 -0.357 ...
* fBodyBodyGyroJerkMag-std()          : num  -0.475 -0.351 -0.485 -0.413 -0.375 ...

## Details of second (output) dataset

The output is "tidyMeasurements.csv" which has column names as headers.

Dimensions: 4 columns, 180 rows.

Columns: "activity" "subjectid" "avgmean" "avgstdeviation":

1. activity : Factor w/ 6 levels (LAYING, SITTING, STANDING, WALKING, WALKING_DOWNSTAIRS, WALKING_UPSTAIRS). This is the name of the activity measured.
2. subjectid: int. This represents each of the (1 to 30) subjects which were measured. 
3. avgmean  : num. This is the average of all mean measurements per subject.
4. avgstdeviation : num. This is the average of all the standard deviations per subject.
